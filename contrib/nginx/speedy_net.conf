server {
    listen [::]:80;
    listen 80;
    server_name *.speedy.net;

    access_log /var/log/nginx/speedy-net-access.log;
    error_log /var/log/nginx/speedy-net-error.log;

    client_max_body_size 50M;

    root  /home/ubuntu/speedy-net/speedy/net/static_serve/root;
    try_files $uri $uri/ @uwsgi;

    location @uwsgi {
        include uwsgi_params;
        uwsgi_pass unix:/run/uwsgi/app/speedy_net/socket;
    }

    location /static {
        alias /home/ubuntu/speedy-net/speedy/net/static_serve;
        access_log off;
        # expires max;
        gzip on;
        gzip_min_length 1100;
        gzip_buffers 4 32k;
        gzip_types text/css text/javascript text/xml text/plain text/x-component application/javascript application/x-javascript application/json application/xml  application/rss+xml font/truetype application/x-font-ttf font/opentype application/vnd.ms-fontobject image/svg+xml;
        gzip_vary on;
        gzip_comp_level 6;
    }
}

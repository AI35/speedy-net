{% extends 'profiles/user_base.html' %}

{% load friendshiptags %}
{% load i18n %}
{% load rules %}

{% block user_content %}

    {% has_perm 'friends.view_requests' request.user user as can_view_requests %}

    {% if can_view_requests %}
        {% if user.friendship_requests_received.all|length %}
            <h2>{% trans 'Incoming Requests' %}</h2>
            {% for friend_request in user.friendship_requests_received.all %}
                {% include 'profiles/user_list_item.html' with user=friend_request.from_user %}
            {% endfor %}
            <h2>{% trans 'Friends' %}</h2>
        {% endif %}
    {% endif %}

    {% for friendship in user.friends.all %}
        {% include 'profiles/user_list_item.html' with user=friendship.from_user %}
    {% empty %}
        <div class="alert alert-warning">
            {% trans 'This user has no friends yet.' %}
        </div>
    {% endfor %}

{% endblock %}
